# GitHub Pages Web Interface Setup

This guide explains how to use the curated feeds manager on GitHub Pages.

## Overview

The web interface at `manage.html` runs entirely in your browser using JavaScript. It reads event data from `report.json` and stores your curated feed configurations in your browser's localStorage.

## Quick Start

### 1. Access the Interface

After deploying to GitHub Pages, visit:
```
https://your-username.github.io/your-repo/manage.html
```

Or click "üéØ Manage Curated Feeds" from the main page.

### 2. Create Your First Feed

1. Click "Create Feed" button
2. Fill in:
   - Feed ID: `my-events` (used in filename)
   - Feed Name: "My Personal Events"
3. Add keywords like `music`, `festival`, `family`
4. Configure preferences
5. Click "üíæ Save Feed"

### 3. Browse and Select Events

1. Click "Browse Events" tab
2. Search/filter events
3. Click events to select them (turns blue)
4. Click "Add Selected to Feed"
5. Enter your feed ID

### 4. Export Configuration

1. Go to "My Feeds" tab
2. Click "üíæ Download Config" button
3. This downloads `curated.yaml`

### 5. Apply Changes to Repository

**To persist your changes:**

1. Download the `curated.yaml` file (from step 4)
2. Commit it to your repository:
   ```bash
   git add config/curated.yaml
   git commit -m "Update curated feeds configuration"
   git push
   ```
3. Trigger GitHub Actions workflow:
   - Go to Actions tab
   - Click "Build ICS & Deploy Pages"
   - Click "Run workflow"
4. Wait for workflow to complete (~2 minutes)
5. Your curated ICS files will be generated at:
   ```
   https://your-username.github.io/your-repo/curated/your-feed-id.ics
   ```

## How It Works

### Client-Side Only

The interface runs entirely in your browser:
- ‚úÖ No server required
- ‚úÖ Works on GitHub Pages
- ‚úÖ No Python/Flask needed
- ‚úÖ Fast and responsive

### Data Storage

**Event Data (read-only):**
- Reads from `report.json` (generated by GitHub Actions)
- Shows all available events
- Updates when GitHub Actions runs

**Feed Configurations (editable):**
- Stored in browser localStorage
- Survives page refreshes
- Private to your browser
- Export as `curated.yaml` to share

### Workflow

```
1. User browses events ‚Üí reads report.json
2. User creates/edits feeds ‚Üí saves to localStorage
3. User downloads config ‚Üí generates curated.yaml
4. User commits curated.yaml ‚Üí pushes to GitHub
5. GitHub Actions runs ‚Üí generates curated ICS files
6. User subscribes to ICS URL ‚Üí gets personalized feed
```

## Features

### ‚úÖ Browse Events
- View all 600+ events
- Real-time filtering
- Search by keyword
- Filter by source/location

### ‚úÖ Create Curated Feeds
- Visual editor
- Tag-based UI
- Multiple feeds
- Enable/disable feeds

### ‚úÖ Select Events
- Click to select
- Multi-select support
- Add to any feed
- View selected count

### ‚úÖ Configure Preferences
- Keywords (include/exclude)
- Location filters
- Source filters
- Max events limit
- Date range

### ‚úÖ Preview Feed
- See matched events count
- Manual vs auto breakdown
- Real-time updates

## Limitations

### Cannot Do Server-Side Operations

Since this runs in the browser, it **cannot**:
- ‚ùå Run the Python pipeline
- ‚ùå Fetch events from sources
- ‚ùå Generate ICS files directly
- ‚ùå Commit to GitHub automatically

### Must Use GitHub Actions

To update your curated feeds:
1. Use web interface to configure
2. Download `curated.yaml`
3. Commit manually
4. Trigger GitHub Actions
5. Wait for generation

This is a **design workflow**, not a limitation - it ensures:
- ‚úÖ Version control of configurations
- ‚úÖ Audit trail of changes
- ‚úÖ Consistent builds
- ‚úÖ No server costs

## Tips & Tricks

### Tip 1: Bookmark the Page

Add to your bookmarks:
```
https://your-username.github.io/your-repo/manage.html
```

### Tip 2: Use Browser Sync

Open on multiple devices - localStorage is per-browser, so export/import config to sync.

### Tip 3: Backup Configurations

Regularly download your `curated.yaml` as backup:
1. Click "üíæ Download Config"
2. Save to your computer
3. Commit to repository

### Tip 4: Share Configurations

Share your `curated.yaml` with others:
1. Download config
2. Share file
3. Others can upload it (or commit to their repo)

### Tip 5: Test Before Committing

Use the preview feature:
- See event counts in real-time
- Adjust filters until you get desired results
- Then export and commit

## Troubleshooting

### Problem: No Events Showing

**Cause:** `report.json` not found or empty

**Solution:**
1. Ensure GitHub Actions has run at least once
2. Check the Actions tab for any errors
3. Manually trigger the workflow
4. Wait for completion
5. Refresh the page

### Problem: Changes Not Persisting

**Cause:** localStorage cleared or different browser

**Solution:**
1. Download config regularly
2. Commit config to repository
3. Your configs in git are the source of truth

### Problem: Can't Generate Feeds

**Cause:** GitHub Pages can't run Python

**Solution:**
This is expected! Follow the workflow:
1. Configure in web UI
2. Download `curated.yaml`
3. Commit to repo
4. Trigger GitHub Actions
5. Actions generates the ICS files

### Problem: Old Events Showing

**Cause:** GitHub Actions hasn't run recently

**Solution:**
1. Go to Actions tab
2. Run "Build ICS & Deploy Pages" workflow
3. This fetches fresh events

## Workflow Example

### Complete Workflow from Start to Finish

**Day 1: Initial Setup**
```
1. Visit manage.html on GitHub Pages
2. Create "Music Events" feed
3. Add keywords: music, concert, band
4. Add locations: Eagle River, Boulder Junction
5. Click Save
6. Download curated.yaml
7. Commit to repository:
   git add config/curated.yaml
   git commit -m "Add music events feed"
   git push
8. Trigger GitHub Actions
9. Wait 2 minutes
10. Subscribe to: https://your-site.github.io/curated/music-events.ics
```

**Day 30: Update Feed**
```
1. Visit manage.html
2. Browse events tab
3. Find specific concert you want
4. Click to select it
5. Add to "Music Events" feed
6. Go to My Feeds tab
7. Edit "Music Events"
8. Add exclude keyword: "karaoke"
9. Save feed
10. Download curated.yaml
11. Commit and push
12. Trigger GitHub Actions
13. Your feed updates automatically
```

## Advanced: Automating with GitHub API

If you want to automate config updates, use GitHub API:

```javascript
// Example: Commit curated.yaml via API
const octokit = new Octokit({ auth: 'your-token' });

await octokit.repos.createOrUpdateFileContents({
  owner: 'your-username',
  repo: 'your-repo',
  path: 'config/curated.yaml',
  message: 'Update curated feeds',
  content: btoa(yamlContent),
  sha: currentFileSha // Get from API first
});

// Then trigger workflow
await octokit.actions.createWorkflowDispatch({
  owner: 'your-username',
  repo: 'your-repo',
  workflow_id: 'build-ics-and-deploy.yml',
  ref: 'main'
});
```

## Deployment Checklist

### First Time Setup

- [ ] GitHub Actions enabled
- [ ] GitHub Pages enabled (Settings ‚Üí Pages ‚Üí Source: GitHub Actions)
- [ ] Workflow runs successfully
- [ ] `report.json` generated in public/
- [ ] Can access `https://your-site.github.io/`
- [ ] Can access `https://your-site.github.io/manage.html`

### Regular Usage

- [ ] Visit manage.html
- [ ] Create/edit feeds
- [ ] Download curated.yaml
- [ ] Commit to repository
- [ ] Trigger GitHub Actions
- [ ] Subscribe to generated ICS files

## Support

- **Interface not loading:** Check browser console for errors
- **No events:** Ensure report.json exists and GitHub Actions ran
- **Changes lost:** Export config regularly
- **Can't commit:** You need write access to the repository

## Next Steps

1. ‚úÖ **Set up GitHub Pages** (if not already)
2. ‚úÖ **Run GitHub Actions** to generate report.json
3. ‚úÖ **Visit manage.html** to configure feeds
4. ‚úÖ **Create your first feed**
5. ‚úÖ **Download and commit** curated.yaml
6. ‚úÖ **Trigger workflow** to generate feeds
7. ‚úÖ **Subscribe to your feed** in calendar app

Enjoy your personalized event feeds! üéâ
